(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){e.exports=a(232)},118:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n,o=a(0),r=a.n(o),i=a(106),c=a.n(i),s=(a(118),a(2)),l=a(7),u=a(4),p=a(3),d=a(5),m=a(9),h=a(25),f=a(22);!function(e){e.UPDATE_AUTH="Update auth",e.REQUESTED_LOGIN_AUTH="Requested login auth",e.REQUESTED_LOGOUT_AUTH="Requested logout auth",e.SUCCESS_AUTH="Success auth",e.FAILURE_AUTH="Failure auth"}(n||(n={}));var b,v,E,g=a(11),j=a(15),O=a.n(j),y=a(53),S=a(19),k=function e(t){var a=t.uuid,n=void 0===a?"":a,o=t.created_at,r=void 0===o?"":o,i=t.modified_at,c=void 0===i?"":i;Object(s.a)(this,e),this.uuid=void 0,this.created_at=void 0,this.modified_at=void 0,this.uuid=n,this.created_at=r,this.modified_at=c},T=function(e){function t(e){var a,n=e.code,o=void 0===n?"":n,r=e.provider,i=void 0===r?"":r,c=e.redirect_uri,l=void 0===c?"":c,d=Object(S.a)(e,["code","provider","redirect_uri"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,d))).code=void 0,a.provider=void 0,a.redirect_uri=void 0,a.code=o,a.provider=i,a.redirect_uri=l,a}return Object(d.a)(t,e),t}(k),A=new function e(){var t=this;Object(s.a)(this,e),this.state={clientID:"732988498848-vuhd6g61bnlqe372i3l5pbpnerteu6na.apps.googleusercontent.com",redirectUri:"postmessage",apiLoginUrl:"login/social/",socialAuthProvider:"google-oauth2",userEmail:"",apiLoginToken:"",userFirstName:"",userLastName:"",objectID:""},this.serverLogin=function(e){var a=new T({code:e,provider:t.state.socialAuthProvider,redirect_uri:t.state.redirectUri});return L.post({data:a,endpointUrl:t.state.apiLoginUrl})},this.serverLogout=Object(y.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("server logout..."),t.state.userEmail="",t.state.userFirstName="",t.state.userLastName="",t.state.apiLoginToken=L.state.apiLoginToken="",e.abrupt("return");case 6:case"end":return e.stop()}},e)}))};!function(e){e.TRIGGERED="triggered",e.REQUESTING="requesting",e.SUCCESS="success",e.FAILURE="failre"}(b||(b={})),function(e){e.CREATE="create",e.READ="read",e.LIST="list",e.UPDATE="update",e.DELETE="delete"}(v||(v={})),function(e){e.POST="post",e.GET="get",e.PATCH="patch",e.DELETE="delete"}(E||(E={}));var C=function(e){switch(e){case v.CREATE:return E.POST;case v.READ:case v.LIST:return E.GET;case v.UPDATE:return E.PATCH;case v.DELETE:return E.DELETE;default:return E.GET}};var L=new function e(){var t=this;Object(s.a)(this,e),this.state={clientID:"732988498848-vuhd6g61bnlqe372i3l5pbpnerteu6na.apps.googleusercontent.com",code:"",redirectUri:"postmessage",apiBaseUrl:"https://appl-tracky-api-https.shaungc.com/api/",apiLoginUrl:"login/social/",socialAuthProvider:"google-oauth2",userEmail:"",apiLoginToken:"",userFirstName:"",userLastName:"",objectID:""},this.get=function(e){var a=e.endpointUrl,n=e.absoluteUrl,o=e.objectName,r=e.data;return fetch(t.getRelativeUrl({endpointUrl:a,absoluteUrl:n,objectName:o,data:r}),Object(g.a)({method:"GET"},t.setApiAuthHeaders())).then(function(e){return e.json()})},this.post=function(e){var a=e.data,n=e.objectName,o=e.endpointUrl;return console.log("restapi:post fired"),fetch(t.getRelativeUrl({endpointUrl:o,objectName:n,data:a}),Object(g.a)({method:"POST"},t.setApiAuthHeaders(),{body:JSON.stringify(a)})).then(function(e){return e.json()})},this.patch=function(e){var a=e.data,n=e.objectName,o=e.endpointUrl;return fetch(t.getRelativeUrl({endpointUrl:o,objectName:n,data:a}),Object(g.a)({method:"PATCH"},t.setApiAuthHeaders(),{body:JSON.stringify(a)})).then(function(e){return e.json()})},this.delete=function(e){var a=e.data,n=e.objectName,o=e.endpointUrl;return fetch(t.getRelativeUrl({endpointUrl:o,objectName:n,data:a}),Object(g.a)({method:"DELETE"},t.setApiAuthHeaders(),{body:JSON.stringify(a)}))},this.getRelativeUrl=function(e){var a=e.objectName,n=e.data,o=e.endpointUrl,r=e.absoluteUrl,i="";return i=r||(o?"".concat(t.state.apiBaseUrl).concat(o):n&&void 0!==n.uuid&&n.uuid?"".concat(t.state.apiBaseUrl).concat(a,"/").concat(n.uuid,"/"):"".concat(t.state.apiBaseUrl).concat(a,"/")),console.log("restapi: url: ".concat(i,", objname=").concat(a)),i},this.setApiAuthHeaders=function(){return t.state.apiLoginToken=A.state.apiLoginToken?A.state.apiLoginToken:t.state.apiLoginToken,console.log("api: set header: got credentials?",t.state.apiLoginToken),{mode:"cors",credentials:t.state.apiLoginToken?"include":"omit",headers:{Authorization:t.state.apiLoginToken?"JWT ".concat(t.state.apiLoginToken):"","Content-Type":"application/json"}}}},I=function(e){return{type:n.REQUESTED_LOGIN_AUTH,payload:{requestStatus:b.REQUESTING,socialAuthToken:e}}},F=function(){return{type:n.REQUESTED_LOGOUT_AUTH,payload:{requestStatus:b.REQUESTING}}},_=function(e,t,a,o,r){return console.log("action username:",e),{type:n.SUCCESS_AUTH,payload:{requestStatus:b.SUCCESS,isLogin:!0,isLocal:!!r,userName:e,expireDateTime:t,apiToken:a,avatarUrl:o}}},D=function(){return{type:n.SUCCESS_AUTH,payload:{requestStatus:b.SUCCESS,isLogin:!1,isLocal:!1,userName:"",expireDateTime:"",apiToken:"",avatarUrl:""}}},R=function(e){return{type:n.FAILURE_AUTH,payload:{requestStatus:b.FAILURE,error:e}}},U=a(45),N=a(14),w=a(108),x=a.n(w),G=function(e,t){for(var a=Object.values(v),n={},o=function(){var t=a[r];n[t]={};for(var o=Object.values(b),i=0;i<o.length;i++){var c=o[i];n[t][c]={actionTypeName:"",action:function(){}},n[t][c].actionTypeName="".concat(c.toUpperCase(),"_").concat(t.toUpperCase(),"_").concat(e.toUpperCase())}n[t][b.TRIGGERED].action=function(e,a,o,r,i){return console.log("action:fired, trigger, ".concat(t)),{type:n[t][b.TRIGGERED].actionTypeName,crudType:t,finalCallback:r,successCallback:a,failureCallback:o,absoluteUrl:i,payload:{requestStatus:b.TRIGGERED,formData:e}}},n[t][b.REQUESTING].action=function(){return{type:n[t][b.REQUESTING].actionTypeName,crudType:t,payload:{requestStatus:b.REQUESTING}}},n[t][b.SUCCESS].action=function(e,a){var o={type:n[t][b.SUCCESS].actionTypeName,crudType:t};return t===v.DELETE?Object(g.a)({},o,{triggerFormData:a,payload:{requestStatus:b.SUCCESS}}):void 0!==e.uuid?Object(g.a)({},o,{payload:{requestStatus:b.SUCCESS,formData:e,lastChangedObjectID:e.uuid}}):Object(g.a)({},o,{payload:{requestStatus:b.SUCCESS,formData:e.results}})},n[t][b.FAILURE].action=function(e){return{type:n[t][b.FAILURE].actionTypeName,crudType:t,payload:{requestStatus:b.FAILURE,error:e}}};var s=O.a.mark(function a(o){var r,i,c;return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Saga: action intercepted; aync=trigger, crud=".concat(t,", obj=").concat(e,"; ready to call api")),r=o.payload.formData,i=o.absoluteUrl,a.next=5,Object(N.d)(n[t][b.REQUESTING].action());case 5:return a.prev=5,a.next=8,Object(N.c)(L[C(t)],{data:r,objectName:e,absoluteUrl:i});case 8:if(c=a.sent,console.log("Saga: res from server",c),!(c.status&&c.status>=400)){a.next=13;break}throw console.error("Server error, see message in res."),new Error("Server error, see message in res.");case 13:if(!c.next){a.next=17;break}return console.log("Saga: res contains next url, so we will also trigger list request for next=",c.next),a.next=17,Object(N.d)(n[v.LIST][b.TRIGGERED].action(void 0,void 0,void 0,void 0,c.next));case 17:if(t!==v.DELETE){a.next=22;break}return a.next=20,Object(N.d)(n[v.DELETE][b.SUCCESS].action(c,r));case 20:a.next=25;break;case 22:return console.log("Saga: ready to dispatch success action"),a.next=25,Object(N.d)(n[t][b.SUCCESS].action(c));case 25:o.successCallback&&o.successCallback(),a.next=34;break;case 28:return a.prev=28,a.t0=a.catch(5),a.next=32,Object(N.d)(n[t][b.FAILURE].action(a.t0));case 32:return o.failureCallback&&o.failureCallback(a.t0),a.abrupt("return");case 34:o.finalCallback&&o.finalCallback();case 35:case"end":return a.stop()}},a,null,[[5,28]])});n[t][b.TRIGGERED].saga=O.a.mark(function a(){var o,r;return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Saga: action intercepted; async=trigger, crud=".concat(t,", obj=").concat(e)),a.next=3,Object(N.a)(n[t][b.TRIGGERED].actionTypeName);case 3:o=a.sent;case 4:return a.next=7,Object(N.e)(o);case 7:return r=a.sent,a.next=10,Object(N.c)(s,r);case 10:a.next=4;break;case 12:case"end":return a.stop()}},a)})},r=0;r<a.length;r++)o();var i={collection:{},requestStatus:b.SUCCESS},c=a.map(function(e){return n[e][b.TRIGGERED].saga});return{actions:n,storeReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0,n=a;if(!(n&&n.payload&&n.payload.requestStatus)||a.type.split("_")[2]!==e.toUpperCase())return Object(g.a)({},t);if(n.payload.requestStatus!==b.SUCCESS)return n.payload.requestStatus===b.TRIGGERED?Object(g.a)({},t,{requestStatus:n.payload.requestStatus}):Object(g.a)({},t,n.payload);if(n.crudType===v.CREATE){var o=n.payload.formData;return{collection:Object(g.a)({},t.collection,Object(U.a)({},o.uuid,o)),requestStatus:n.payload.requestStatus,lastChangedObjectID:n.payload.lastChangedObjectID}}if(n.crudType===v.LIST){var r=n.payload.formData,c={},s=!0,l=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var m=p.value;c[m.uuid]=m}}catch(O){l=!0,u=O}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}console.log("Reducer: crud=list, action=",n),console.log("initialState=",i),console.log("beforestore=",t),console.log("newlistobjects=",c);var h={collection:Object(g.a)({},t.collection,c),requestStatus:n.payload.requestStatus};return console.log("afterstore=",h),h}if(n.crudType===v.UPDATE){var f=n.payload.formData;return{collection:Object(g.a)({},t.collection,Object(U.a)({},f.uuid,f)),requestStatus:n.payload.requestStatus,lastChangedObjectID:n.payload.lastChangedObjectID}}if(n.crudType===v.DELETE){var E=n.triggerFormData;console.log("Reducer: delete, targetobj=",E),console.log("Reducer: delete, beforestore=",t);var j={collection:x()(t.collection,[E.uuid]),requestStatus:n.payload.requestStatus};return console.log("Reducer: delete, afterstore",j),j}return Object(g.a)({},t)},sagas:c}},P=function(e){function t(e){var a,n=e.place_name,o=void 0===n?"":n,r=e.country,i=void 0===r?"":r,c=e.state,l=void 0===c?"":c,d=e.city,m=void 0===d?"":d,h=e.street,f=void 0===h?"":h,b=e.full_address,v=void 0===b?"":b,E=e.zipcode,g=void 0===E?"":E,j=Object(S.a)(e,["place_name","country","state","city","street","full_address","zipcode"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,j))).place_name=void 0,a.country=void 0,a.state=void 0,a.city=void 0,a.street=void 0,a.full_address=void 0,a.zipcode=void 0,a.place_name=o,a.country=i,a.state=l,a.place_name=o,a.city=m,a.street=f,a.full_address=v,a.zipcode=g,a}return Object(d.a)(t,e),t}(k),q=(new P({}),G("addresses"),function(e){function t(e){var a,n=e.text,o=void 0===n?"":n,r=e.user,i=void 0===r?{}:r,c=e.url,l=void 0===c?"":c,d=e.order,m=void 0===d?0:d,h=Object(S.a)(e,["text","user","url","order"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,h))).text=void 0,a.user=void 0,a.url=void 0,a.order=void 0,a.text=o,a.user=i,a.url=l,a.order=m,a}return Object(d.a)(t,e),t}(k)),B=function(e){function t(e){var a,n=e.user,o=void 0===n?"":n,r=e.labels,i=void 0===r?[]:r,c=e.name,l=void 0===c?"":c,d=e.hq_location,m=void 0===d?new P({}):d,h=e.home_page,f=void 0===h?new q({}):h,b=e.ratings,v=void 0===b?{}:b,E=e.applications,g=void 0===E?{}:E,j=Object(S.a)(e,["user","labels","name","hq_location","home_page","ratings","applications"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,j))).user=void 0,a.labels=void 0,a.name=void 0,a.hq_location=void 0,a.home_page=void 0,a.ratings=void 0,a.applications=void 0,a.user=o,a.labels=i,a.name=l,a.hq_location=m,a.home_page=f,a.ratings=v,a.applications=g,a}return Object(d.a)(t,e),t}(k),H=(new B({}),G("companies")),M=H.actions,V=H.storeReducer,Q=H.sagas,J=function(e){function t(e){var a,n=e.user,o=void 0===n?"":n,r=e.user_company,i=void 0===r?"":r,c=e.position_title,l=void 0===c?"":c,d=e.job_description_page,m=void 0===d?new q({}):d,h=e.job_source,f=void 0===h?new q({}):h,b=e.labels,v=void 0===b?{}:b,E=Object(S.a)(e,["user","user_company","position_title","job_description_page","job_source","labels"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,E))).user=void 0,a.user_company=void 0,a.position_title=void 0,a.job_description_page=void 0,a.job_source=void 0,a.labels=void 0,a.user=o,a.user_company=i,a.position_title=l,a.job_description_page=m,a.job_source=f,a.labels=v,a}return Object(d.a)(t,e),t}(k),W=(new J({}),G("applications")),z=W.actions,X=W.storeReducer,Y=W.sagas,$=a(54),K=a(12),Z=a.n(K),ee=(a(24),a(17)),te=a.n(ee),ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).onLoginButtonClicked=function(e,t){console.log("login button clicked",e,t),t.onClick(e)},a.onAuthSuccess=function(e){console.log("login button auth success"),a.props.onSuccess(e)},a.onAuthFailure=function(e){console.log("login button auth failed"),a.props.onFailure&&a.props.onFailure(e)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"UserAuthButton"},r.a.createElement($.GoogleLogin,{render:function(t){return r.a.createElement(te.a,{onClick:function(a){return e.onLoginButtonClicked(a,t)},unelevated:!0,icon:r.a.createElement(Z.a,{hasRipple:!0,icon:"account_circle"}),disabled:e.props.disabled},"Google Login")},onSuccess:this.onAuthSuccess,onFailure:this.onAuthFailure,clientId:this.props.clientID,responseType:"code",redirectUri:this.props.redirectUri||"postmessage"}))}}]),t}(o.Component),ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).onAuthSuccess=function(e){a.props.onSuccess(e)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"UserAuthButton"},r.a.createElement($.GoogleLogout,{render:function(t){return r.a.createElement(te.a,{onClick:e.props.isLocal?e.props.onClickWhenIsLocal:t.onClick,unelevated:!0,icon:r.a.createElement(Z.a,{hasRipple:!0,icon:"eject"}),disabled:e.props.disabled},"Logout")},onLogoutSuccess:this.onAuthSuccess}))}}]),t}(o.Component),oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={clientID:"732988498848-vuhd6g61bnlqe372i3l5pbpnerteu6na.apps.googleusercontent.com",code:"",redirectUri:"postmessage",apiBaseUrl:"http://localhost:8000/",apiLoginUrl:"login/social/",socialAuthProvider:"google-oauth2",userEmail:"",apiLoginToken:"",userFirstName:"",userLastName:"",objectID:""},a.onSocialLoginSuccess=function(e){console.log("Google Oauth2 res:",e),a.setState({code:e.code},function(){console.log("social button: request auth..."),a.props.requestedLoginAuth(a.state.code)})},a.onSocialLoginFailure=function(e){console.error("Social login failed:",e)},a.onSocialLogoutSuccess=function(){console.log("Social logout success, now our web app logout"),a.props.requestedLogoutAuth()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"SocialAuth"},"auth requestStatus: ",this.props.auth.requestStatus," ",r.a.createElement("br",null),this.props.auth.isLogin?r.a.createElement(ne,{isLocal:this.props.auth.isLocal,onClickWhenIsLocal:this.onSocialLogoutSuccess,onSuccess:this.onSocialLogoutSuccess,disabled:this.props.auth.requestStatus===b.REQUESTING}):r.a.createElement(ae,{clientID:this.state.clientID,onSuccess:this.onSocialLoginSuccess,onFailure:this.onSocialLoginFailure,disabled:this.props.auth.requestStatus===b.REQUESTING}))}}]),t}(o.Component);var re,ie=Object(h.g)(Object(m.c)(function(e){return{auth:e.auth}},function(e){return{requestedLoginAuth:function(t){e(I(t))},requestedLogoutAuth:function(){e(F())}}})(oe)),ce=(a(37),a(78)),se=a.n(ce),le=a(32),ue=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"FormInputField"},r.a.createElement(le.b,{name:this.props.fieldName,render:function(t){var a=t.field;t.form;return r.a.createElement(se.a,{label:e.props.label,onTrailingIconSelect:e.props.onTrailingIconSelect,trailingIcon:e.props.onTrailingIconSelect&&r.a.createElement(Z.a,{role:"button",icon:"clear"})},r.a.createElement(ce.Input,Object.assign({type:e.props.type||re.TEXT,inputType:"input"},a)))}}),r.a.createElement(le.a,{name:this.props.fieldName}))}}]),t}(o.Component);!function(e){e.TEXT="text",e.PASSWORD="password",e.EMAIL="email",e.URL="url",e.DATE="date"}(re||(re={}));var pe,de=function(){function e(t){var a=this;Object(s.a)(this,e),this.fieldName=void 0,this.label=void 0,this.model=void 0,this.formField=void 0,this.isDynamic=void 0,this.dynamicLimit=void 0,this.getInstanceDataFromFormikValues=void 0,this.fieldName=t.fieldName,this.label=t.label,this.isDynamic=t.isDynamic,this.dynamicLimit=t.dynamicLimit,t.getInstanceDataFromFormikValues?this.getInstanceDataFromFormikValues=t.getInstanceDataFromFormikValues:this.getInstanceDataFromFormikValues=function(e){return e&&e[a.fieldName]?(a.isDynamic&&!Array.isArray(e[a.fieldName])&&(alert("Oops! Something might go wrong. Info: at class FormBaseFieldMeta."),console.error("isDynamic=true, but the value is not an array:"),console.error("values =",e," this.fieldName =",a.fieldName)),e[a.fieldName]):(alert("Oops! Something might go wrong. Info: at class FormBaseFieldMeta."),console.error("values =",e," this.fieldName =",a.fieldName),a.isDynamic?[]:"")},this.formField=ue}return Object(l.a)(e,[{key:"getInstance",value:function(e){var t=this.model;return t?this.isDynamic?this.getInstanceDataFromFormikValues(e).map(function(e){return new t(e)}):new t(e[this.fieldName]):e[this.fieldName]}}]),e}(),me=function(e){function t(e){var a,n=e.type,o=e.onTrailingIconSelect,r=Object(S.a)(e,["type","onTrailingIconSelect"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,r))).type=void 0,a.onTrailingIconSelect=void 0,a.type=n,a.onTrailingIconSelect=o,a.formField=ue,a}return Object(d.a)(t,e),t}(de);!function(e){e.SUBMIT="submit",e.BUTTON="button"}(pe||(pe={}));var he=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;Object(s.a)(this,e),this.text=t,this.onClick=a,this.type=n},fe=function(e){function t(e){var a;if(Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).initialInstance=void 0,a.onSubmit=function(e,t){var n=t.setSubmitting;console.log("submit values =",e),n(!1);var o={},r=!0,i=!1,c=void 0;try{for(var s,l=a.props.formFieldPropsList[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;o[u.fieldName]=u.getInstance(e)}}catch(m){i=!0,c=m}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}var p=a.props.model;if(p&&a.props.createInstanceTriggerAction&&a.props.updateInstanceTriggerAction){var d=new p(Object(g.a)({uuid:a.initialInstance.uuid},o,a.props.enforcedInstanceData));console.log("instanceData =",o),console.log("instance =",d),d.uuid?(console.log("ready to send update data",d),a.props.updateInstanceTriggerAction(d,a.props.onSubmitSuccess,function(){return n(!1)})):(console.log("ready to send create data",d),a.props.createInstanceTriggerAction(d,a.props.onSubmitSuccess,function(){return n(!1)}))}else a.props.onSubmit&&a.props.onSubmit(e,{setSubmitting:n})},a.props.model&&!a.props.initialInstance){var n=a.props.model;a.initialInstance=new n({})}else a.initialInstance=a.props.initialInstance;return a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"FormFactory"},r.a.createElement(le.e,{initialValues:this.initialInstance,validate:this.props.validate,onSubmit:this.onSubmit},function(t){var a=t.values,n=t.isSubmitting;return r.a.createElement(le.d,null,e.props.formFieldPropsList.map(function(e,t){return r.a.createElement(e.formField,Object.assign({key:t},e,{formikValues:a}))}),e.props.actionButtonPropsList.map(function(e,t){return r.a.createElement(te.a,{key:t,type:e.type||pe.BUTTON,disabled:n,unelevated:!0,onClick:e.onClick,children:e.text})}))}))}}]),t}(o.Component),be=function(e){var t=[new me({fieldName:"username",label:"Username"}),new me({fieldName:"password",label:"Password",type:re.PASSWORD})],a=[new he("Login",void 0,pe.SUBMIT)],n=function(){var t=Object(y.a)(O.a.mark(function t(a,n){var o,r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.setSubmitting)(!1),console.log("values =",a),t.prev=3,t.next=6,fetch("".concat(L.state.apiBaseUrl,"api-token-auth/"),{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 6:if((o=t.sent).ok){t.next=10;break}throw console.log("INFO: server res =",o),Error(o.statusText);case 10:return t.next=12,o.json();case 12:r=t.sent,A.state.apiLoginToken=r.token,e.registerLoginSuccess(a.username,r.token,r.avatar_url),e.onLoginSuccess(),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(3),alert("Oops! Login failed."),console.error("ERROR: login failed. See error message:"),console.error(t.t0);case 23:case"end":return t.stop()}},t,null,[[3,18]])}));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"loginForm"},r.a.createElement(fe,{formFieldPropsList:t,actionButtonPropsList:a,onSubmit:n}))},ve={backgroundColor:"purple",color:"white"},Ee=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).formFactoryProps=void 0,a.onLoginSuccess=function(){a.props.listApplication(),a.props.listCompany()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"LandingPage",style:ve},this.props.auth.isLogin&&r.a.createElement(h.a,{to:"/home/"}),r.a.createElement("h1",null,"Appl Tracky"),r.a.createElement(ie,null),r.a.createElement("h2",null,"Or login locally (admin only):"),r.a.createElement(be,{registerLoginSuccess:this.props.registerLocalLoginSuccess,onLoginSuccess:this.onLoginSuccess}),r.a.createElement("hr",null),r.a.createElement(te.a,{href:"https://github.com/rivernews/appl-tracky-spa",target:"_blank",unelevated:!0,icon:r.a.createElement(Z.a,{hasRipple:!0,icon:"code"})},"Github Repository"))}}]),t}(o.Component),ge=Object(h.g)(Object(m.c)(function(e){return{auth:e.auth}},function(e){return{registerLocalLoginSuccess:function(t,a,n){return e(_(t,"",a,n,!0))},listApplication:function(){return e(z[v.LIST][b.TRIGGERED].action(new J({})))},listCompany:function(){return e(M[v.LIST][b.TRIGGERED].action(new B({})))}}})(Ee)),je=(a(74),a(26)),Oe=a.n(je),ye=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.company;return r.a.createElement("div",{className:"CompanyComponent"},r.a.createElement("p",null,r.a.createElement(f.a,{to:"/com-app/".concat(e.uuid,"/")},e.name),r.a.createElement(Oe.a,{onClick:this.props.onEditIconClicked},r.a.createElement(Z.a,{hasRipple:!0,icon:"edit"})),r.a.createElement(Oe.a,{onClick:this.props.onDeleteIconClicked},r.a.createElement(Z.a,{hasRipple:!0,icon:"delete"})),r.a.createElement("br",null),e.hq_location.full_address&&r.a.createElement("span",null,r.a.createElement("strong",null,e.hq_location.place_name||"Location",":")," ",e.hq_location.full_address),r.a.createElement("br",null),e.home_page.url&&r.a.createElement("span",null,r.a.createElement("strong",null,"Company Website: "),e.home_page.url&&r.a.createElement("a",{target:"_blank",href:e.home_page.url&&e.home_page.url.includes("//")?e.home_page.url:"//".concat(e.home_page.url)},e.home_page.text||"Link")),r.a.createElement("br",null)))}}]),t}(o.Component),Se=function(e){function t(e){var a,n=e.text,o=void 0===n?"":n,r=e.application,i=void 0===r?"":r,c=e.applicationstatuslink_set,l=void 0===c?[]:c,d=e.date,m=void 0===d?"":d,h=e.order,f=void 0===h?0:h,b=Object(S.a)(e,["text","application","applicationstatuslink_set","date","order"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,b))).text=void 0,a.application=void 0,a.applicationstatuslink_set=void 0,a.date=void 0,a.order=void 0,a.text=o,a.application=i,a.applicationstatuslink_set=l,a.date=m,a.order=f,a}return Object(d.a)(t,e),t}(k),ke=(new Se({}),G("application-statuses")),Te=ke.actions,Ae=ke.storeReducer,Ce=ke.sagas,Le=function(e){function t(e){var a,n=e.application_status,o=void 0===n?"":n,r=e.link,i=void 0===r?new q({}):r,c=Object(S.a)(e,["application_status","link"]);return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,c))).application_status=void 0,a.link=void 0,a.application_status=o,a.link=i,a}return Object(d.a)(t,e),t}(k),Ie=function(e){return r.a.createElement("div",{className:"FormBaseDynamicFieldControlls"},r.a.createElement(Oe.a,{onClick:function(){e.formikArrayHelpers.remove(e.index)}},r.a.createElement(Z.a,{hasRipple:!0,icon:"delete"})))},Fe=function(e){return r.a.createElement(te.a,{type:"button",onClick:function(){if(e.model){var t=e.model;e.formikArrayHelpers.push(new t({}))}else e.formikArrayHelpers.push({})},children:"New ".concat(e.label)})},_e=function(e){return function(t){if(t.isDynamic&&!t.formikValues)throw alert("Oops! Something's wrong."),Error("When `isDynamic` is true, you need to pass over `formikValues`.");var a=t.formikValues,n=t.getInstanceDataFromFormikValues;return t.isDynamic&&n&&a?r.a.createElement(le.c,{name:t.fieldName,render:function(o){return r.a.createElement("div",{className:"FormApplicationStatusLinkFieldsContainer"},n(a).map(function(a,n){return r.a.createElement("div",{key:n,className:"FormBaseDynamicField"},r.a.createElement(e,{fieldName:"".concat(t.fieldName,"[").concat(n,"]"),label:"".concat(t.label," ").concat(n),formikValues:t.formikValues,getInstanceDataFromFormikValues:t.getInstanceDataFromFormikValues}),r.a.createElement(Ie,{index:n,formikArrayHelpers:o}))}),r.a.createElement(Fe,{formikArrayHelpers:o,label:t.label,model:t.model}))}}):r.a.createElement(e,{fieldName:t.fieldName,label:t.label,formikValues:t.formikValues,getInstanceDataFromFormikValues:t.getInstanceDataFromFormikValues})}},De=_e(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).textInputFieldMeta=void 0,a.urlInputFieldMeta=void 0,a.textInputFieldMeta=new me({fieldName:"".concat(a.props.fieldName,".text"),label:"Description"}),a.urlInputFieldMeta=new me({fieldName:"".concat(a.props.fieldName,".url"),label:"Link url"}),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"FormLinkField"},this.props.label&&r.a.createElement("h4",null,this.props.label),r.a.createElement(ue,this.textInputFieldMeta),r.a.createElement(ue,this.urlInputFieldMeta))}}]),t}(o.Component)),Re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).model=q,a.formField=De,a}return Object(d.a)(t,e),t}(de),Ue=_e(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).linkFieldProps=void 0,a.linkFieldProps=new Re({fieldName:"".concat(a.props.fieldName,".link"),label:"",isDynamic:!1}),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"FormApplicationStatusLinkField"},this.props.label&&r.a.createElement("h4",null,this.props.label),r.a.createElement(De,Object.assign({},this.linkFieldProps,{formikValues:this.props.formikValues,getInstanceDataFromFormikValues:this.props.getInstanceDataFromFormikValues})))}}]),t}(o.Component)),Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).model=Le,a.formField=Ue,a}return Object(d.a)(t,e),t}(de),we=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).formFieldPropsList=void 0,a.actionButtonPropsList=void 0,a.validate=function(e){var t={};return e.text||(t.text="Required"),e.date||(t.date="Please give a valid date"),t},a.formFieldPropsList=[new me({fieldName:"text",label:"Status*"}),new me({fieldName:"date",label:"Date",type:re.DATE}),new Ne({fieldName:"applicationstatuslink_set",label:"Status Link",isDynamic:!0})],a.actionButtonPropsList=[new he(a.props.applicationStatus?"Save Status":"Create Status",void 0,pe.SUBMIT),new he("Cancel",a.props.onCancel)],a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ApplicationStatusFormComponent"},r.a.createElement(fe,{model:Se,initialInstance:new Se(Object(g.a)({},this.props.applicationStatus)),enforcedInstanceData:{application:this.props.application.uuid},validate:this.validate,formFieldPropsList:this.formFieldPropsList,actionButtonPropsList:this.actionButtonPropsList,createInstanceTriggerAction:this.props.createApplicationStatus,updateInstanceTriggerAction:this.props.updateApplicationStatus,onSubmitSuccess:this.props.onSubmitSuccess}))}}]),t}(o.Component),xe=Object(h.g)(Object(m.c)(function(e){return{applicationStatusStore:e.applicationStatus}},function(e){return{createApplicationStatus:function(t,a,n){return e(Te[v.CREATE][b.TRIGGERED].action(t,a,void 0,n))},updateApplicationStatus:function(t,a,n){return e(Te[v.UPDATE][b.TRIGGERED].action(t,a,void 0,n))}}})(we)),Ge=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isFormOpened:!1},a.renderDisplay=function(e){return r.a.createElement("div",{className:"ApplicationStatusComponent"},r.a.createElement("p",null,r.a.createElement("span",null,"Status: ",e.text),r.a.createElement(Oe.a,{onClick:function(){console.log("application status component: edit button clicked."),a.setState({isFormOpened:!0})}},r.a.createElement(Z.a,{hasRipple:!0,icon:"edit"})),r.a.createElement(Oe.a,{onClick:function(){return a.props.deleteApplicationStatus(e)}},r.a.createElement(Z.a,{hasRipple:!0,icon:"delete"})),r.a.createElement("br",null),r.a.createElement("span",null,e.date),r.a.createElement("br",null),e.applicationstatuslink_set.map(function(e){return e&&e.link&&r.a.createElement("span",{key:e.uuid},r.a.createElement("a",{href:e.link.url&&e.link.url.includes("//")?e.link.url:"//".concat(e.link.url),target:"_blank"},e.link.text)," ","|"," ")})))},a.renderFormController=function(e,t){return r.a.createElement("div",{className:"application-status-form-controller"},a.state.isFormOpened?r.a.createElement("div",{className:"application-component__status-form"},r.a.createElement("h3",null,"Add new status to application for"," ",e.position_title," "),r.a.createElement(xe,{application:e,applicationStatus:t,onCancel:function(){a.setState({isFormOpened:!1})},onSubmitSuccess:function(){a.setState({isFormOpened:!1})}})):r.a.createElement(te.a,{onClick:function(e){a.setState({isFormOpened:!0})},unelevated:!0,icon:r.a.createElement(Z.a,{hasRipple:!0,icon:"add"})},"Add New Status"))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ApplicationStatusComponent"},(this.state.isFormOpened||this.props.isOnlyForm)&&this.props.application?this.renderFormController(this.props.application,this.props.applicationStatus):this.props.applicationStatus?this.renderDisplay(this.props.applicationStatus):r.a.createElement("span",null,"Nothing to render: no application status provided so cannot display; no application provided so form for create/update are not allowed."))}}]),t}(o.Component),Pe=Object(h.g)(Object(m.c)(function(e){return{}},function(e){return{deleteApplicationStatus:function(t,a){return e(Te[v.DELETE][b.TRIGGERED].action(t,a))}}})(Ge)),qe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).formFieldPropsList=void 0,a.actionButtonPropsList=void 0,a.validateAppForm=function(e){var t={};return e.position_title||(t.position_title="Required"),t},a.formFieldPropsList=[new me({fieldName:"position_title",label:"Position Title*"}),new Re({fieldName:"job_description_page",label:"Job Description Link"}),new Re({fieldName:"job_source",label:"Job Source Link"})],a.actionButtonPropsList=[new he(a.props.company?"Save Application":"Create Application",void 0,pe.SUBMIT),new he("Cancel",a.props.onCancel)],a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ApplicationFormComponent"},r.a.createElement(fe,{model:J,initialInstance:new J(Object(g.a)({},this.props.application)),enforcedInstanceData:{user_company:this.props.company.uuid},validate:this.validateAppForm,formFieldPropsList:this.formFieldPropsList,actionButtonPropsList:this.actionButtonPropsList,createInstanceTriggerAction:this.props.createApplication,updateInstanceTriggerAction:this.props.updateApplication,onSubmitSuccess:this.props.onSubmitSuccess}))}}]),t}(o.Component),Be=Object(m.c)(function(e){return{applicationStore:e.application}},function(e){return{createApplication:function(t,a,n){return e(z[v.CREATE][b.TRIGGERED].action(t,a,void 0,n))},updateApplication:function(t,a,n){return e(z[v.UPDATE][b.TRIGGERED].action(t,a,void 0,n))}}})(qe),He=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isFormOpened:!1},a.renderApplicationFormController=function(){return a.props.company&&r.a.createElement("div",{className:"application-form-controller"},a.state.isFormOpened?r.a.createElement(Be,{onCancel:function(e){console.log("onCancel clicked"),a.setState({isFormOpened:!1})},onSubmitSuccess:function(){return a.setState({isFormOpened:!1})},company:a.props.company,application:a.props.application}):r.a.createElement(te.a,{onClick:function(e){a.setState({isFormOpened:!0})},unelevated:!0,icon:r.a.createElement(Z.a,{hasRipple:!0,icon:"add"})},"Add Application"))},a.renderApplicationDisplay=function(e,t){return r.a.createElement("div",{className:"application-component-display"},r.a.createElement("h3",null,"Application"),r.a.createElement("p",null,r.a.createElement("span",null,r.a.createElement("strong",null,"Position:")," ",e.position_title),r.a.createElement(Oe.a,{onClick:function(){a.setState({isFormOpened:!0})}},r.a.createElement(Z.a,{hasRipple:!0,icon:"edit"})),r.a.createElement(Oe.a,{onClick:function(){return a.props.deleteApplication(e)}},r.a.createElement(Z.a,{hasRipple:!0,icon:"delete"})),r.a.createElement("br",null),r.a.createElement("span",null,"Application UUID: ",e.uuid),r.a.createElement("br",null),e.job_description_page.url&&r.a.createElement("span",null,r.a.createElement("strong",null,"JD Page: "),r.a.createElement("a",{target:"_blank",href:e.job_description_page.url&&e.job_description_page.url.includes("//")?e.job_description_page.url:"//".concat(e.job_description_page.url)},e.job_description_page.text||"Link")),r.a.createElement("br",null),e.job_source.url&&r.a.createElement("span",null,r.a.createElement("strong",null,"Job Source: "),r.a.createElement("a",{target:"_blank",href:e.job_source.url&&e.job_source.url.includes("//")?e.job_source.url:"//".concat(e.job_source.url)},e.job_source.text||"Link"))),a.props.isShowApplicationStatuses&&t.map(function(t){return r.a.createElement(Pe,{key:t.uuid,applicationStatus:t,application:e})}),r.a.createElement(Pe,{application:e,isOnlyForm:!0}))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"application-component"},this.state.isFormOpened||this.props.isOnlyForm?this.renderApplicationFormController():this.props.application&&Array.isArray(this.props.applicationStatusList)&&this.renderApplicationDisplay(this.props.application,this.props.applicationStatusList))}}]),t}(o.Component),Me=Object(m.c)(function(e){return{}},function(e){return{deleteApplication:function(t,a){return e(z[v.DELETE][b.TRIGGERED].action(t,a))}}})(He),Ve=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).onDeleteClick=function(e){a.props.company.uuid?a.props.deleteCompany(a.props.company):console.error("Attempted to delete but company obj has no uuid")},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"CompanyApplicationContainer"},r.a.createElement(ye,{company:this.props.company,onDeleteIconClicked:this.onDeleteClick,onEditIconClicked:function(){e.props.history.push("/com-form/".concat(e.props.company.uuid,"/"))}}),Object.values(this.props.applicationStore.collection).filter(function(t){return t.user_company===e.props.company.uuid}).map(function(t){var a=e.props.isShowApplicationStatuses?Object.values(e.props.applicationStatusStore.collection).filter(function(e){return e.application===t.uuid}):[];return r.a.createElement(Me,{key:t.uuid,application:t,company:e.props.company,applicationStatusList:a,isShowApplicationStatuses:e.props.isShowApplicationStatuses})}),!this.props.isShowApplicationStatuses&&r.a.createElement("hr",null))}}]),t}(o.Component),Qe=Object(h.g)(Object(m.c)(function(e){return{applicationStore:e.application,applicationStatusStore:e.applicationStatus}},function(e){return{deleteCompany:function(t,a){return e(M[v.DELETE][b.TRIGGERED].action(t,a))},updateCompany:function(t,a){return e(M[v.UPDATE][b.TRIGGERED].action(t,a))}}})(Ve)),Je=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"UserAppPage"},r.a.createElement("h1",null,"Your Applications"),r.a.createElement(te.a,{onClick:function(){e.props.history.push("/com-form/")},unelevated:!0,icon:r.a.createElement(Z.a,{hasRipple:!0,icon:"add"}),children:"Add Company"}),r.a.createElement("br",null),this.props.company.collection!=={}&&Object.values(this.props.company.collection).map(function(e){return r.a.createElement(Qe,{key:e.uuid,company:e})}))}}]),t}(o.Component),We=Object(h.g)(Object(m.c)(function(e){return{company:e.company,application:e.application}},function(e){return{}})(Je)),ze=_e(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).fullAddressInputFieldMeta=void 0,a.placeNameInputFieldMeta=void 0,a.fullAddressInputFieldMeta=new me({fieldName:"".concat(a.props.fieldName,".full_address"),label:"Full Address"}),a.placeNameInputFieldMeta=new me({fieldName:"".concat(a.props.fieldName,".place_name"),label:"Place Name"}),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"FormAddressField"},this.props.label&&r.a.createElement("h4",null,this.props.label),r.a.createElement(ue,this.placeNameInputFieldMeta),r.a.createElement(ue,this.fullAddressInputFieldMeta))}}]),t}(o.Component)),Xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).model=P,a.formField=ze,a}return Object(d.a)(t,e),t}(de),Ye=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).formFieldPropsList=void 0,a.actionButtonPropsList=void 0,a.validateAppForm=function(e){var t={};return e.name||(t.name="Required"),t},a.formFieldPropsList=[new me({fieldName:"name",label:"Company Name*"}),new Xe({fieldName:"hq_location",label:"Headquarter Location"}),new Re({fieldName:"home_page",label:"Company Website"})],a.actionButtonPropsList=[new he(a.props.company?"Save Company":"Create Company",void 0,pe.SUBMIT),new he("Cancel",a.props.onCancel)],a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"CompanyFormComponent"},r.a.createElement(fe,{model:B,initialInstance:new B(Object(g.a)({},this.props.company)),validate:this.validateAppForm,formFieldPropsList:this.formFieldPropsList,actionButtonPropsList:this.actionButtonPropsList,createInstanceTriggerAction:this.props.createCompany,updateInstanceTriggerAction:this.props.updateCompany,onSubmitSuccess:this.props.onSubmitSuccess}))}}]),t}(o.Component),$e=Object(m.c)(function(e){return{}},function(e){return{createCompany:function(t,a,n){return e(M[v.CREATE][b.TRIGGERED].action(t,a,void 0,n))},updateCompany:function(t,a,n){return e(M[v.UPDATE][b.TRIGGERED].action(t,a,void 0,n))}}})(Ye),Ke=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.uuid&&this.props.company.collection[this.props.match.params.uuid]?this.props.company.collection[this.props.match.params.uuid]:void 0;return console.log("com form page: params is",this.props.match.params.uuid,"company is",t),r.a.createElement("div",{className:"AddComPage"},r.a.createElement("h1",null,t?"Update Company":"Add a Company"),r.a.createElement($e,{company:t,onSubmitSuccess:function(){if(console.log("com form page: onSubmitSuccess"),e.props.company.lastChangedObjectID){var t=e.props.company.collection[e.props.company.lastChangedObjectID];console.log("new company:",t),e.props.history.push("/com-app/".concat(t.uuid,"/"))}else console.error("store has no lastChangedObjectID")},onCancel:function(t){e.props.history.goBack()}}))}}]),t}(o.Component),Ze=Object(h.g)(Object(m.c)(function(e){return{company:e.company}},function(e){return{}})(Ke)),et=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={companyUuid:"",company:new B({})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.uuid;console.log("mount, got uuid from route?",e),this.props.company.collection&&e in this.props.company.collection&&this.setState({companyUuid:e,company:new B(this.props.company.collection[e])})}},{key:"renderAll",value:function(){var e=this;if(this.state.company.uuid)return r.a.createElement("div",{className:"user-com-app-page-content"},r.a.createElement(te.a,{onClick:function(t){e.props.history.push("/")}},"Back"),r.a.createElement("h1",null,this.state.company.name),r.a.createElement(Me,{company:this.state.company,isOnlyForm:!0}),r.a.createElement("br",null),this.state.company.uuid&&r.a.createElement(Qe,{company:this.state.company,isShowApplicationStatuses:!0}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"UserComAppPage"},this.state.companyUuid&&this.props.company.collection&&this.state.companyUuid in this.props.company.collection?this.renderAll():this.state.companyUuid?r.a.createElement("h1",null,"No company found. Uuid=",this.state.companyUuid):r.a.createElement("h1",null,"Company uuid not specified"))}}]),t}(o.Component),tt=Object(h.g)(Object(m.c)(function(e){return{company:e.company}},function(e){return{createApplication:function(t,a){return e(z[v.CREATE][b.TRIGGERED].action(t,a))}}})(et)),at=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,"Logged in:"," ",this.props.auth.isLogin&&this.props.auth.isLogin.toString()||"undefine"),r.a.createElement("div",null,"User Name: ",this.props.auth.userName||"(empty)"),r.a.createElement("div",null,"Token (for API): ",this.props.auth.apiToken||"(empty)"))}}]),t}(o.Component),nt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"My Profile"),r.a.createElement(at,{auth:this.props.auth}),r.a.createElement(ie,null))}}]),t}(o.Component),ot=Object(h.g)(Object(m.c)(function(e){return{auth:e.auth}})(nt)),rt=a(80),it=a.n(rt),ct=(a(229),a(230),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"PageRoutesContainer"},"/"===this.props.location.pathname?r.a.createElement(h.b,{path:"/",exact:!0,component:ge}):r.a.createElement("div",{className:"PrivateRoutesContainer"},!this.props.auth.isLogin&&r.a.createElement(h.a,{to:"/"}),r.a.createElement(it.a,{title:"Appl Tracky",actionItems:[r.a.createElement(f.a,{to:"/home/"},r.a.createElement(Z.a,{hasRipple:!0,key:"itemHome",icon:"home"})),r.a.createElement(f.a,{to:"/profile/"},""===this.props.auth.avatarUrl?r.a.createElement(Z.a,{hasRipple:!0,key:"itemProfile",icon:"account_circle"}):r.a.createElement("img",{style:{height:"100%",borderRadius:"50%"},src:this.props.auth.avatarUrl}))]}),r.a.createElement(rt.TopAppBarFixedAdjust,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/home/",component:We}),r.a.createElement(h.b,{path:"/com-form/:uuid?/",component:Ze}),r.a.createElement(h.b,{path:"/com-app/:uuid/",component:tt}),r.a.createElement(h.b,{path:"/com-app/",component:tt}),r.a.createElement(h.b,{path:"/profile/",component:ot})))))}}]),t}(o.Component)),st=Object(h.g)(Object(m.c)(function(e){return{auth:e.auth}},{})(ct)),lt=(a(231),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(st,null))}}]),t}(o.Component)),ut=Object(m.c)(function(e){return{}})(lt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pt,dt=a(31),mt=a(44),ht={requestStatus:b.SUCCESS,isLogin:!1,isLocal:!1,socialAuthToken:"",apiToken:"",userName:"",expireDateTime:"",avatarUrl:""},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;return Object(g.a)({},e,t.payload)};!function(e){e.ResetAllStore="RESET_ALL_STORE"}(pt||(pt={}));var bt=function(){return{type:pt.ResetAllStore}},vt=a(23),Et=a(105),gt=a(59),jt=a(112),Ot=O.a.mark(Tt),yt=O.a.mark(At),St=O.a.mark(Ct),kt=O.a.mark(Lt);function Tt(e){var t,a;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("auth saga: initialize"),t=e.payload.socialAuthToken,console.log("auth saga: request fired"),n.prev=3,n.next=6,Object(N.c)(A.serverLogin,t);case 6:return a=n.sent,console.log("auth saga: server login using code from social button. server jsonRes=",a),A.state.apiLoginToken=a.token,n.next=11,Object(N.d)(_(a.email,"",a.token,a.avatar_url,!1));case 11:return n.next=13,Object(N.d)(z[v.LIST][b.TRIGGERED].action(new J({})));case 13:return n.next=15,Object(N.d)(M[v.LIST][b.TRIGGERED].action(new B({})));case 15:return n.next=17,Object(N.d)(Te[v.LIST][b.TRIGGERED].action(new Se({})));case 17:n.next=25;break;case 19:return n.prev=19,n.t0=n.catch(3),console.warn("auth saga: error"),n.next=24,Object(N.d)(R(n.t0));case 24:return n.abrupt("return");case 25:case"end":return n.stop()}},Ot,null,[[3,19]])}function At(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.f)(n.REQUESTED_LOGIN_AUTH,Tt);case 2:case"end":return e.stop()}},yt)}function Ct(e){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("auth logout saga: fired"),e.prev=1,e.next=4,Object(N.c)(A.serverLogout);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,Object(N.d)(R(e.t0));case 10:return e.abrupt("return");case 11:return console.log("auth logout saga: navigating"),e.next=14,Object(N.d)(D());case 14:return e.next=16,Object(N.d)(bt());case 16:case"end":return e.stop()}},St,null,[[1,6]])}function Lt(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.f)(n.REQUESTED_LOGOUT_AUTH,Ct);case 2:case"end":return e.stop()}},kt)}var It,Ft=Object(jt.a)(),_t=O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)([At(),Lt()].concat(Object(gt.a)(Q.map(function(e){return e()})),Object(gt.a)(Y.map(function(e){return e()})),Object(gt.a)(Ce.map(function(e){return e()}))));case 2:case"end":return e.stop()}},e)}),Dt=Object(vt.a)({basename:"/appl-tracky-spa"}),Rt=Object(dt.d)((It=Dt,function(e,t){var a={};e?a=t.type===pt.ResetAllStore?{router:e.router}:e:(a.router=void 0,a.auth=void 0,a.company=void 0,a.application=void 0,a.applicationStatus=void 0),console.log("beforeRootStore",e);var n=Object(g.a)({},e,{router:Object(mt.b)(It)(a.router,t),auth:ft(a.auth,t),company:V(a.company,t),application:X(a.application,t),applicationStatus:Ae(a.applicationStatus,t)});return console.log("afterRootStore",n),n}),{},Object(dt.c)(Object(dt.a)(Object(Et.a)(Dt),Ft)));Ft.run(_t);c.a.render(r.a.createElement(function(e){return r.a.createElement(m.a,{store:e.store},r.a.createElement(mt.a,{history:Dt},r.a.createElement(ut,null)))},{store:Rt}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[113,1,2]]]);
//# sourceMappingURL=main.10c4b935.chunk.js.map